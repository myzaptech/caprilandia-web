(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{1968:function(e,r,t){Promise.resolve().then(t.bind(t,8744))},8744:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var a=t(7437),n=t(2265),o=t(7293),i=t(8552),s=t(2869),c=t(6070),d=t(5613),l=t(1020);function u(){let[e,r]=(0,n.useState)(""),[t,o]=(0,n.useState)(!1),i=async()=>{o(!0),r("Probando conexi\xf3n...");try{await l.m.checkStorageConnection()?r("✅ Firebase Storage conectado correctamente"):r("❌ No se pudo conectar a Firebase Storage")}catch(e){r("❌ Error: ".concat(e instanceof Error?e.message:"Error desconocido"))}finally{o(!1)}},u=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){o(!0),r("Subiendo archivo de prueba...");try{let e=await l.m.uploadFile(a,"test");r("✅ Archivo subido: ".concat(e.url))}catch(e){r("❌ Error subiendo archivo: ".concat(e instanceof Error?e.message:"Error desconocido")),console.error("Error detallado:",e)}finally{o(!1)}}};return(0,a.jsxs)(c.Zb,{className:"max-w-2xl mx-auto",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)(c.ll,{children:"\uD83E\uDDEA Test Firebase Storage"})}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(s.z,{onClick:i,disabled:t,children:"Probar Conexi\xf3n"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",onChange:u,accept:"image/*,video/*",disabled:t,style:{display:"none"},id:"file-test"}),(0,a.jsx)(s.z,{onClick:()=>{var e;return null===(e=document.getElementById("file-test"))||void 0===e?void 0:e.click()},disabled:t,variant:"outline",children:"Probar Subida de Archivo"})]})]}),e&&(0,a.jsx)(d.bZ,{children:(0,a.jsx)(d.X,{children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:e})})}),t&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Procesando..."})]})]})]})}function f(){let[e,r]=(0,n.useState)("Verificando...");(0,n.useEffect)(()=>{o.I8?r("✅ Firebase Auth est\xe1 disponible"):r("❌ Firebase Auth NO est\xe1 disponible")},[]);let t=async()=>{if(!o.I8){r("❌ Firebase Auth no est\xe1 disponible");return}try{let e=await (0,i.e5)(o.I8,"test@caprilandia.com","Test123456!");r("✅ Login exitoso: ".concat(e.user.email))}catch(e){r("❌ Error: ".concat(e instanceof Error?e.message:"Error desconocido"))}};return(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Test Firebase Auth"}),(0,a.jsx)("p",{className:"mb-4",children:e}),(0,a.jsx)("button",{onClick:t,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Test Login"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Test Firebase Storage"}),(0,a.jsx)(u,{})]})]})}},5613:function(e,r,t){"use strict";t.d(r,{X:function(){return d},bZ:function(){return c}});var a=t(7437),n=t(2265),o=t(535),i=t(4508);let s=(0,o.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,...o}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(s({variant:n}),t),...o})});c.displayName="Alert",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})}).displayName="AlertTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...n})});d.displayName="AlertDescription"},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var a=t(7437),n=t(2265),o=t(7495),i=t(535),s=t(4508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:i,asChild:d=!1,...l}=e,u=d?o.g7:"button";return(0,a.jsx)(u,{className:(0,s.cn)(c({variant:n,size:i,className:t})),ref:r,...l})});d.displayName="Button"},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return s},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=t(7437),n=t(2265),o=t(4508);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let s=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...n})});s.displayName="CardHeader";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},1020:function(e,r,t){"use strict";t.d(r,{m:function(){return s}});var a=t(7293),n=t(6485);let o=["image/jpeg","image/jpg","image/png","image/webp"],i=["video/mp4","video/webm","video/quicktime"];class s{static async checkStorageConnection(){if(!a.tO)return!1;try{return(0,n.iH)(a.tO,"test-connection"),!0}catch(e){return console.error("❌ Error de conexi\xf3n a Firebase Storage:",e),!1}}static validateFile(e){let r=[...o,...i];return r.includes(e.type)?e.size>52428800?{valid:!1,error:"Archivo muy grande: ".concat((e.size/1024/1024).toFixed(2),"MB. M\xe1ximo permitido: ").concat(50,"MB")}:{valid:!0}:{valid:!1,error:"Tipo de archivo no permitido: ".concat(e.type,". Tipos permitidos: ").concat(r.join(", "))}}static async uploadFile(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media",t=this.validateFile(e);if(!t.valid)throw Error(t.error);try{return await this.uploadFileViaAPI(e,r)}catch(e){throw console.error("❌ Error en API fallback:",e),Error("Error subiendo archivo: ".concat(e instanceof Error?e.message:"Error desconocido"))}}static async uploadFileViaAPI(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media",t=new FormData;t.append("file",e),t.append("folder",r);let a=await fetch("/api/upload",{method:"POST",body:t});if(!a.ok)throw Error("API upload failed: ".concat(a.statusText));let n=await a.json();if(!n.success)throw Error(n.error||"API upload failed");return{url:n.url,type:n.type,filename:n.filename,path:n.path}}static async deleteFile(e){if(!a.tO)throw Error("Firebase Storage no est\xe1 inicializado");let r=a.tO;try{let t=(0,n.iH)(r,e);await (0,n.oq)(t)}catch(e){throw console.error("❌ Error eliminando archivo:",e),Error("Error eliminando archivo: ".concat(e instanceof Error?e.message:"Error desconocido"))}}static async generateVideoThumbnail(e){return new Promise((r,t)=>{let a=document.createElement("video"),n=document.createElement("canvas"),o=n.getContext("2d");if(!o){t(Error("No se pudo crear contexto de canvas"));return}a.onloadedmetadata=()=>{n.width=a.videoWidth||640,n.height=a.videoHeight||360,a.currentTime=Math.min(1,.1*a.duration)},a.onseeked=()=>{o.drawImage(a,0,0,n.width,n.height),r(n.toDataURL("image/jpeg",.8)),URL.revokeObjectURL(a.src)},a.onerror=e=>{console.error("❌ Error generando thumbnail:",e),t(Error("Error generando miniatura del video"))},a.src=URL.createObjectURL(e)})}static async resizeImage(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080;return new Promise((a,n)=>{let o=new Image,i=document.createElement("canvas"),s=i.getContext("2d");if(!s){n(Error("No se pudo crear contexto de canvas"));return}o.onload=()=>{let{width:c,height:d}=o;c>r&&(d=d*r/c,c=r),d>t&&(c=c*t/d,d=t),i.width=c,i.height=d,s.drawImage(o,0,0,c,d),i.toBlob(e=>{e?a(e):n(Error("Error convirtiendo imagen"))},e.type,.9)},o.onerror=()=>{n(Error("Error cargando imagen"))},o.src=URL.createObjectURL(e)})}}},7293:function(e,r,t){"use strict";let a;t.d(r,{I8:function(){return c},tO:function(){return d}});var n=t(738),o=t(5978),i=t(8552),s=t(6485);a=0===(0,n.C6)().length?(0,n.ZF)({apiKey:"AIzaSyAJd6zyhkkqVjuQWb6thS05UeD8-rCaCZ0",authDomain:"carilandia-base.firebaseapp.com",projectId:"carilandia-base",storageBucket:"carilandia-base.firebasestorage.app",messagingSenderId:"841945640213",appId:"1:841945640213:web:35cec3e1e3c91085db0d1c",measurementId:"G-HXPX889G7H"}):(0,n.C6)()[0];let c=null,d=null;try{(0,o.ad)(a),c=(0,i.v0)(a),d=(0,s.cF)(a)}catch(e){console.error("❌ Error inicializando Firebase:",e),c=null,d=null}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return o}});var a=t(1994),n=t(3335);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}}},function(e){e.O(0,[609,15,138,589,100,731,469,7,440,956,421,577,399,85,38,378,433,747,365,783,212,971,744],function(){return e(e.s=1968)}),_N_E=e.O()}]);