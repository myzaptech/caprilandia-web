(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{5681:function(e,s,a){Promise.resolve().then(a.bind(a,7882))},7882:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Q}});var r=a(7437),t=a(2265),i=a(9376),l=a(2869),n=a(6070),c=a(5186),o=a(4508);let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t})});d.displayName="Textarea";var m=a(6815),u=a(1312);let h=u.fC,x=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(u.aV,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...t})});x.displayName=u.aV.displayName;let v=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(u.xz,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...t})});v.displayName=u.xz.displayName;let g=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(u.VY,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t})});g.displayName=u.VY.displayName;var p=a(5974),j=a(5613),f=a(9322),b=a(7692),N=a(9397),y=a(7168),w=a(3229),C=a(8906),I=a(6595),k=a(8930),E=a(2369),_=a(1239),S=a(5153),z=a(6012),T=a(1985),Z=a(3145),F=a(3113),A=a(7689),R=a(2489),P=a(1020);function O(e){let{currentImage:s,onImageChange:a,label:i="Imagen",aspectRatio:n="landscape",maxSize:c=5}=e,[o,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),x=(0,t.useRef)(null),v=async e=>{if(e){if(!e.type.startsWith("image/")){alert("Por favor selecciona solo archivos de imagen");return}if(e.size>1048576*c){alert("El archivo es muy grande. M\xe1ximo ".concat(c,"MB"));return}d(!0);try{let s=await P.m.uploadFile(e,"images");a(s.url)}catch(e){console.error("❌ Error subiendo imagen:",e),alert("Error al subir la imagen: ".concat(e instanceof Error?e.message:"Error desconocido"))}finally{d(!1)}}},g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)},p=()=>{switch(n){case"square":return"aspect-square";case"portrait":return"aspect-[3/4]";default:return"aspect-video"}};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(m._,{className:"text-sm font-medium",children:i}),s?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"relative ".concat(p()," rounded-lg overflow-hidden border"),children:(0,r.jsx)(Z.default,{src:s||"/placeholder.svg",alt:i,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),(0,r.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(l.z,{onClick:()=>{a(""),x.current&&(x.current.value="")},variant:"destructive",size:"sm",className:"h-8 w-8 p-0",children:(0,r.jsx)(R.Z,{className:"w-4 h-4"})})}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)(l.z,{onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},variant:"outline",size:"sm",disabled:o,children:[(0,r.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Cambiar imagen"]})})]}):(0,r.jsx)("div",{className:"relative ".concat(p()," border-2 border-dashed rounded-lg transition-colors ").concat(u?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"),onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{var s;e.preventDefault(),e.stopPropagation(),h(!1);let a=null===(s=e.dataTransfer.files)||void 0===s?void 0:s[0];a&&v(a)},children:(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center",children:[(0,r.jsx)(F.Z,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Arrastra una imagen aqu\xed o haz clic para seleccionar"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:["PNG, JPG, WEBP hasta ",c,"MB"]}),(0,r.jsxs)(l.z,{onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},variant:"outline",disabled:o,children:[(0,r.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),o?"Subiendo...":"Seleccionar imagen"]})]})}),(0,r.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&v(a)},className:"hidden"}),o&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-teal-600 mr-2"}),"Procesando imagen..."]})]})}var D=a(7914),V=a(401),L=a(875),M=a(2135);let U=D.fC;D.ZA;let G=D.B4,q=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(D.xz,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[t,(0,r.jsx)(D.JO,{asChild:!0,children:(0,r.jsx)(L.Z,{className:"h-4 w-4 opacity-50"})})]})});q.displayName=D.xz.displayName;let B=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(D.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})});B.displayName=D.u_.displayName;let Y=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(D.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(L.Z,{className:"h-4 w-4"})})});Y.displayName=D.$G.displayName;let H=t.forwardRef((e,s)=>{let{className:a,children:t,position:i="popper",...l}=e;return(0,r.jsx)(D.h_,{children:(0,r.jsxs)(D.VY,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,r.jsx)(B,{}),(0,r.jsx)(D.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(Y,{})]})})});H.displayName=D.VY.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(D.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=D.__.displayName;let W=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(D.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(D.wU,{children:(0,r.jsx)(V.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(D.eT,{children:t})]})});W.displayName=D.ck.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(D.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=D.Z0.displayName;var $=a(9374);function J(e){let{currentVideo:s,onVideoChange:a,onThumbnailChange:i,label:n="Video",maxSize:c=50}=e,[o,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),x=(0,t.useRef)(null),v=async e=>{if(e){if(!e.type.startsWith("video/")){alert("Por favor selecciona solo archivos de video (MP4, WebM, MOV)");return}if(e.size>1048576*c){alert("El archivo es muy grande. M\xe1ximo ".concat(c,"MB"));return}d(!0);try{let s=await P.m.uploadFile(e,"videos");a(s.url);try{let s=await g(e);if(s&&i){let a=await fetch(s),r=await a.blob(),t=new File([r],"thumbnail_".concat(e.name.replace(/\.[^/.]+$/,""),".jpg"),{type:"image/jpeg"});URL.revokeObjectURL(s);let l=await P.m.uploadFile(t,"thumbnails");i(l.url)}}catch(e){}}catch(e){console.error("❌ Error subiendo video:",e),alert("Error al subir el video: ".concat(e instanceof Error?e.message:"Error desconocido"))}finally{d(!1)}}},g=e=>new Promise(s=>{let a=document.createElement("video"),r=document.createElement("canvas"),t=r.getContext("2d");a.onloadedmetadata=()=>{r.width=a.videoWidth,r.height=a.videoHeight,a.currentTime=1},a.onseeked=()=>{t&&(t.drawImage(a,0,0),r.toBlob(e=>{e?s(URL.createObjectURL(e)):s("")},"image/jpeg",.8))},a.onerror=()=>{s("")},a.src=URL.createObjectURL(e)}),p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)};return(0,r.jsxs)("div",{className:"space-y-3",children:[n&&(0,r.jsx)(m._,{className:"text-sm font-medium",children:n}),(0,r.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg transition-colors ".concat(u?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"," ").concat("aspect-video"),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1);let s=e.dataTransfer.files;s&&s[0]&&v(s[0])},children:[s?(0,r.jsxs)("div",{className:"relative w-full h-full",children:[(0,r.jsx)("video",{src:s,className:"w-full h-full object-cover rounded-lg",controls:!0,preload:"metadata",children:"Tu navegador no soporta la reproducci\xf3n de videos."}),(0,r.jsx)(l.z,{onClick:()=>{a(""),i&&i("")},variant:"destructive",size:"sm",className:"absolute top-2 right-2",children:(0,r.jsx)(R.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center h-full",children:[(0,r.jsx)($.Z,{className:"w-8 h-8 mb-3 ".concat(u?"text-teal-500":"text-gray-400")}),(0,r.jsx)("p",{className:"text-sm mb-2 ".concat(u?"text-teal-600":"text-gray-600"),children:u?"Suelta el video aqu\xed":"Arrastra un video aqu\xed"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"o"}),(0,r.jsxs)(l.z,{onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},variant:"outline",size:"sm",disabled:o,children:[(0,r.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),o?"Subiendo...":"Seleccionar Video"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["MP4, WebM, MOV (m\xe1x. ",c,"MB)"]})]}),(0,r.jsx)("input",{ref:x,type:"file",accept:"video/mp4,video/webm,video/quicktime,video/x-msvideo",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&v(a)},className:"hidden"})]})]})}function X(e){let{items:s,onItemsChange:a}=e,t=e=>{a([...s,{type:e,url:"",alt:"image"===e?"Nueva imagen":"Nuevo video",..."video"===e&&{thumbnail:""}}])},i=e=>{a(s.filter((s,a)=>a!==e))},o=(e,r,t)=>{a(s.map((s,a)=>a===e?{...s,[r]:t}:s))},d=(e,r)=>{a(s.map((s,a)=>{if(a===e){let e={...s,type:r,url:""};if("video"===r)return{...e,thumbnail:""};{let{thumbnail:s,...a}=e;return a}}return s}))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:["Galer\xeda Multimedia (",s.length," elementos)"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.z,{onClick:()=>t("image"),size:"sm",variant:"outline",children:[(0,r.jsx)(F.Z,{className:"w-4 h-4 mr-2"}),"Agregar Imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>t("video"),size:"sm",variant:"outline",children:[(0,r.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"Agregar Video"]})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e,s)=>(0,r.jsx)(n.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["image"===e.type?(0,r.jsx)(F.Z,{className:"w-4 h-4 text-blue-600"}):(0,r.jsx)($.Z,{className:"w-4 h-4 text-purple-600"}),(0,r.jsxs)(m._,{className:"font-medium",children:["image"===e.type?"Imagen":"Video"," ",s+1]})]}),(0,r.jsx)(l.z,{onClick:()=>i(s),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Tipo de contenido"}),(0,r.jsxs)(U,{value:e.type,onValueChange:e=>d(s,e),children:[(0,r.jsx)(q,{children:(0,r.jsx)(G,{})}),(0,r.jsxs)(H,{children:[(0,r.jsx)(W,{value:"image",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(F.Z,{className:"w-4 h-4"}),"Imagen"]})}),(0,r.jsx)(W,{value:"video",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)($.Z,{className:"w-4 h-4"}),"Video"]})})]})]})]}),"image"===e.type?(0,r.jsx)(O,{currentImage:e.url,onImageChange:e=>o(s,"url",e),label:"",aspectRatio:"landscape"}):(0,r.jsx)(J,{currentVideo:e.url,onVideoChange:e=>o(s,"url",e),onThumbnailChange:e=>o(s,"thumbnail",e),label:"",maxSize:50}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"alt-".concat(s),children:"Descripci\xf3n"}),(0,r.jsx)(c.I,{id:"alt-".concat(s),value:e.alt,onChange:e=>o(s,"alt",e.target.value),placeholder:"Descripci\xf3n del ".concat("image"===e.type?"imagen":"video")})]})]})},s))}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,r.jsx)(A.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"No hay elementos en la galer\xeda"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsxs)(l.z,{onClick:()=>t("image"),variant:"outline",children:[(0,r.jsx)(F.Z,{className:"w-4 h-4 mr-2"}),"Agregar primera imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>t("video"),variant:"outline",children:[(0,r.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"Agregar primer video"]})]})]})]})}function K(e){let{media:s,onMediaChange:a,roomName:t}=e,i=e=>{a([...s,{type:e,url:"",alt:"".concat(t," - ").concat("image"===e?"Imagen":"Video"),..."video"===e&&{thumbnail:""}}])},o=e=>{a(s.filter((s,a)=>a!==e))},d=(e,r,t)=>{a(s.map((s,a)=>a===e?{...s,[r]:t}:s))},u=(e,r)=>{a(s.map((s,a)=>{if(a===e){let e={...s,type:r,url:"",alt:"".concat(t," - ").concat("image"===r?"Imagen":"Video")};if("video"===r)return{...e,thumbnail:""};{let{thumbnail:s,...a}=e;return a}}return s}))};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-700",children:["Galer\xeda de ",t," (",s.length," archivos)"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.z,{onClick:()=>i("image"),size:"sm",variant:"outline",children:[(0,r.jsx)(F.Z,{className:"w-3 h-3 mr-1"}),"Imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>i("video"),size:"sm",variant:"outline",children:[(0,r.jsx)($.Z,{className:"w-3 h-3 mr-1"}),"Video"]})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:s.map((e,s)=>(0,r.jsx)(n.Zb,{className:"p-3",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["image"===e.type?(0,r.jsx)(F.Z,{className:"w-3 h-3 text-blue-600"}):(0,r.jsx)($.Z,{className:"w-3 h-3 text-purple-600"}),(0,r.jsxs)(m._,{className:"text-sm font-medium",children:["image"===e.type?"Imagen":"Video"," ",s+1]})]}),(0,r.jsx)(l.z,{onClick:()=>o(s),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 h-6 w-6 p-0",children:(0,r.jsx)(k.Z,{className:"w-3 h-3"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{className:"text-xs",children:"Tipo"}),(0,r.jsxs)(U,{value:e.type,onValueChange:e=>u(s,e),children:[(0,r.jsx)(q,{className:"h-8",children:(0,r.jsx)(G,{})}),(0,r.jsxs)(H,{children:[(0,r.jsx)(W,{value:"image",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(F.Z,{className:"w-3 h-3"}),"Imagen"]})}),(0,r.jsx)(W,{value:"video",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)($.Z,{className:"w-3 h-3"}),"Video"]})})]})]})]}),"image"===e.type?(0,r.jsx)(O,{currentImage:e.url,onImageChange:e=>d(s,"url",e),label:"",aspectRatio:"landscape"}):(0,r.jsx)(J,{currentVideo:e.url,onVideoChange:e=>d(s,"url",e),onThumbnailChange:e=>d(s,"thumbnail",e),label:"",maxSize:30}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"alt-".concat(s),className:"text-xs",children:"Descripci\xf3n"}),(0,r.jsx)(c.I,{id:"alt-".concat(s),value:e.alt,onChange:e=>d(s,"alt",e.target.value),placeholder:"Descripci\xf3n del ".concat("image"===e.type?"imagen":"video"),className:"h-8 text-xs"})]})]})},s))}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,r.jsx)(A.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"No hay archivos multimedia para esta habitaci\xf3n"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsxs)(l.z,{onClick:()=>i("image"),variant:"outline",size:"sm",children:[(0,r.jsx)(F.Z,{className:"w-3 h-3 mr-1"}),"Primera imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>i("video"),variant:"outline",size:"sm",children:[(0,r.jsx)($.Z,{className:"w-3 h-3 mr-1"}),"Primer video"]})]})]})]})}function Q(){var e,s,a,o;let u=(0,i.useRouter)(),[Z,F]=(0,t.useState)(!1),[A,R]=(0,t.useState)(!0),[P,D]=(0,t.useState)("hero"),[V,L]=(0,t.useState)(!1),[M,U]=(0,t.useState)(""),{content:G,setContent:q,saveChanges:B,isLoading:Y,error:H,isConnected:W,refreshContent:$}=(0,z.r)();(0,t.useEffect)(()=>{let e=(0,T.yv)(async e=>{e?await (0,T.NC)()?(F(!0),U(e.email||"")):(await (0,T._x)(),u.push("/admin/login")):(F(!1),u.push("/admin/login")),R(!1)});return()=>e()},[u]);let J=async()=>{try{await (0,T._x)(),u.push("/admin/login")}catch(e){console.error("Error al cerrar sesi\xf3n:",e),(0,S.Am)({title:"Error",description:"No se pudo cerrar la sesi\xf3n correctamente",variant:"destructive"})}},Q=async()=>{L(!0);try{let e=await B();e.success?(0,S.Am)({title:"✅ Guardado exitoso",description:"Los cambios se han guardado correctamente."}):(0,S.Am)({title:"❌ Error al guardar",description:e.error||"No se pudo guardar el contenido.",variant:"destructive"})}catch(e){(0,S.Am)({title:"❌ Error",description:"Ocurri\xf3 un error inesperado al guardar.",variant:"destructive"})}finally{L(!1)}},ee=(e,s,a)=>{q(r=>({...r,[e]:{...r[e],[s]:a}}))},es=(e,s,a,r,t)=>{q(i=>({...i,[e]:{...i[e],[s]:i[e][s].map((e,s)=>s===a?{...e,[r]:t}:e)}}))},ea=e=>{q(s=>({...s,testimonials:{...s.testimonials,reviews:s.testimonials.reviews.filter((s,a)=>a!==e)}}))},er=e=>{q(s=>({...s,rooms:{...s.rooms,rooms:s.rooms.rooms.filter((s,a)=>a!==e)}}))};return A||Y?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teal-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:A?"Verificando autenticaci\xf3n...":"Cargando contenido..."})]})}):Z?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"bg-teal-600 p-2 rounded",children:(0,r.jsx)(C.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.C,{variant:"secondary",className:"text-xs",children:"☁️ Firebase Storage"}),(0,r.jsxs)(p.C,{className:"text-xs bg-green-100 text-green-800",children:[(0,r.jsx)(_.Z,{className:"w-3 h-3 mr-1"}),"Auto-guardado activo"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(E.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:M})]}),(0,r.jsxs)(l.z,{onClick:$,variant:"outline",size:"sm",disabled:Y,children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-2 ".concat(Y?"animate-spin":"")}),"Actualizar"]}),(0,r.jsxs)(l.z,{onClick:Q,className:"bg-teal-600 hover:bg-teal-700",size:"sm",disabled:V,children:[(0,r.jsx)(w.Z,{className:"w-4 h-4 mr-2 ".concat(V?"animate-spin":"")}),V?"Guardando...":"Guardar Ahora"]}),(0,r.jsxs)(l.z,{onClick:J,variant:"outline",size:"sm",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Salir"]})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[H&&(0,r.jsxs)(j.bZ,{className:"mb-6 border-blue-200 bg-blue-50",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(j.X,{className:"text-blue-800",children:H})]}),(0,r.jsxs)(h,{value:P,onValueChange:D,className:"space-y-6",children:[(0,r.jsxs)(x,{className:"grid w-full grid-cols-5 lg:grid-cols-9 gap-1",children:[(0,r.jsx)(v,{value:"site",className:"text-xs",children:"Sitio"}),(0,r.jsx)(v,{value:"hero",className:"text-xs",children:"Inicio"}),(0,r.jsx)(v,{value:"about",className:"text-xs",children:"Acerca"}),(0,r.jsx)(v,{value:"rooms",className:"text-xs",children:"Habitaciones"}),(0,r.jsx)(v,{value:"tour",className:"text-xs",children:"Tour"}),(0,r.jsx)(v,{value:"gallery",className:"text-xs",children:"Galer\xeda"}),(0,r.jsx)(v,{value:"services",className:"text-xs",children:"Servicios"}),(0,r.jsx)(v,{value:"testimonials",className:"text-xs",children:"Testimonios"}),(0,r.jsx)(v,{value:"contact",className:"text-xs",children:"Contacto"})]}),(0,r.jsx)(g,{value:"site",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Configuraci\xf3n del Sitio"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"site-title",children:"T\xedtulo del Sitio (aparece en la pesta\xf1a del navegador)"}),(0,r.jsx)(c.I,{id:"site-title",value:(null===(e=G.siteConfig)||void 0===e?void 0:e.title)||"",onChange:e=>ee("siteConfig","title",e.target.value),placeholder:"Hostal Caprilandia - Donde la tradici\xf3n y la comodidad se encuentran"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"site-description",children:"Descripci\xf3n del Sitio (para SEO)"}),(0,r.jsx)(d,{id:"site-description",value:(null===(s=G.siteConfig)||void 0===s?void 0:s.description)||"",onChange:e=>ee("siteConfig","description",e.target.value),rows:3,placeholder:"Descripci\xf3n que aparecer\xe1 en los resultados de b\xfasqueda"})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(O,{currentImage:null===(a=G.siteConfig)||void 0===a?void 0:a.logo,onImageChange:e=>ee("siteConfig","logo",e),label:"Logo del Negocio - aparece en la navegaci\xf3n y footer",aspectRatio:"square",maxSize:2}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsx)("p",{children:"• Recomendado: 64x64 p\xedxeles o mayor"}),(0,r.jsx)("p",{children:"• Formato: PNG, JPG, o SVG"}),(0,r.jsx)("p",{children:"• Tama\xf1o m\xe1ximo: 2MB"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(O,{currentImage:null===(o=G.siteConfig)||void 0===o?void 0:o.favicon,onImageChange:e=>ee("siteConfig","favicon",e),label:"Icono del Sitio (Favicon) - aparece en la pesta\xf1a del navegador",aspectRatio:"square",maxSize:1}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsx)("p",{children:"• Recomendado: 32x32 p\xedxeles o 64x64 p\xedxeles"}),(0,r.jsx)("p",{children:"• Formato: PNG, ICO, o JPG"}),(0,r.jsx)("p",{children:"• Tama\xf1o m\xe1ximo: 1MB"})]})]})]})]})})]})}),(0,r.jsx)(g,{value:"hero",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Secci\xf3n Principal (Hero)"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"hero-title",children:"T\xedtulo Principal"}),(0,r.jsx)(c.I,{id:"hero-title",value:G.hero.title,onChange:e=>ee("hero","title",e.target.value),className:"text-lg font-semibold"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"hero-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(d,{id:"hero-subtitle",value:G.hero.subtitle,onChange:e=>ee("hero","subtitle",e.target.value),rows:3})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(O,{currentImage:G.hero.backgroundImage,onImageChange:e=>ee("hero","backgroundImage",e),label:"Imagen de Fondo Principal",aspectRatio:"landscape"})})]})})]})}),(0,r.jsx)(g,{value:"about",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Secci\xf3n Acerca de"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"about-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"about-title",value:G.about.title,onChange:e=>ee("about","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"about-desc1",children:"Primer P\xe1rrafo"}),(0,r.jsx)(d,{id:"about-desc1",value:G.about.description1,onChange:e=>ee("about","description1",e.target.value),rows:4})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"about-desc2",children:"Segundo P\xe1rrafo"}),(0,r.jsx)(d,{id:"about-desc2",value:G.about.description2,onChange:e=>ee("about","description2",e.target.value),rows:3})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(O,{currentImage:G.about.image,onImageChange:e=>ee("about","image",e),label:"Imagen de la Secci\xf3n Acerca de",aspectRatio:"landscape"})})]})})]})}),(0,r.jsx)(g,{value:"rooms",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex justify-between items-center",children:["Secci\xf3n Habitaciones (",G.rooms.rooms.length," habitaciones)",(0,r.jsxs)(l.z,{onClick:()=>{q(e=>({...e,rooms:{...e.rooms,rooms:[...e.rooms.rooms,{name:"Nueva Habitaci\xf3n",description:"Descripci\xf3n de la habitaci\xf3n",price:"",showPrice:!1,image:"",features:["Cama doble","Ba\xf1o privado","WiFi"],popular:!1}]}}))},size:"sm",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Agregar Habitaci\xf3n"]})]})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"rooms-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"rooms-title",value:G.rooms.title,onChange:e=>ee("rooms","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"rooms-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"rooms-subtitle",value:G.rooms.subtitle,onChange:e=>ee("rooms","subtitle",e.target.value)})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Habitaciones"}),G.rooms.rooms.map((e,s)=>(0,r.jsxs)(n.Zb,{className:"p-6 border-l-4 border-l-teal-500",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-lg",children:["Habitaci\xf3n ",s+1,": ",e.name]}),(0,r.jsx)(l.z,{onClick:()=>er(s),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Nombre"}),(0,r.jsx)(c.I,{value:e.name,onChange:e=>es("rooms","rooms",s,"name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Descripci\xf3n"}),(0,r.jsx)(d,{value:e.description,onChange:e=>es("rooms","rooms",s,"description",e.target.value),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"show-price-".concat(s),checked:e.showPrice||!1,onChange:e=>es("rooms","rooms",s,"showPrice",e.target.checked)}),(0,r.jsx)(m._,{htmlFor:"show-price-".concat(s),className:"font-medium",children:"Mostrar precio para esta habitaci\xf3n"})]}),e.showPrice&&(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Precio"}),(0,r.jsx)(c.I,{value:e.price||"",onChange:e=>es("rooms","rooms",s,"price",e.target.value),placeholder:"Ej: $120/noche, Consultar, Desde $100"})]}),!e.showPrice&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:'El bot\xf3n mostrar\xe1 "Consultar Disponibilidad" en lugar de "Reservar"'})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(m._,{children:["Caracter\xedsticas (",e.features.length,")"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[e.features.map((a,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.I,{value:a,onChange:a=>{let r=[...e.features];r[t]=a.target.value,es("rooms","rooms",s,"features",r)},placeholder:"Caracter\xedstica"}),(0,r.jsx)(l.z,{onClick:()=>{es("rooms","rooms",s,"features",e.features.filter((e,s)=>s!==t))},variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})]},"feature-".concat(s,"-").concat(t))),(0,r.jsxs)(l.z,{onClick:()=>{es("rooms","rooms",s,"features",[...e.features,"Nueva caracter\xedstica"])},variant:"outline",size:"sm",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Agregar Caracter\xedstica"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"popular-".concat(s),checked:e.popular||!1,onChange:e=>es("rooms","rooms",s,"popular",e.target.checked)}),(0,r.jsx)(m._,{htmlFor:"popular-".concat(s),children:"Marcar como popular"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(O,{currentImage:e.image,onImageChange:e=>es("rooms","rooms",s,"image",e),label:"Imagen principal de ".concat(e.name),aspectRatio:"landscape"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Esta ser\xe1 la imagen que aparece en la vista previa de la habitaci\xf3n"})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(K,{media:e.media||[],onMediaChange:e=>es("rooms","rooms",s,"media",e),roomName:e.name})})]})]},"room-".concat(s)))]})]})]})}),(0,r.jsx)(g,{value:"tour",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Tour Virtual"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"tour-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"tour-title",value:G.virtualTour.title,onChange:e=>ee("virtualTour","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"tour-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"tour-subtitle",value:G.virtualTour.subtitle,onChange:e=>ee("virtualTour","subtitle",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"tour-videoUrl",children:"URL del Video (YouTube Embed)"}),(0,r.jsx)(c.I,{id:"tour-videoUrl",value:G.virtualTour.videoUrl,onChange:e=>ee("virtualTour","videoUrl",e.target.value),placeholder:"https://www.youtube.com/embed/your_video_id"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(m._,{children:"Vista Previa del Video"}),(0,r.jsx)("div",{className:"relative aspect-video rounded-lg overflow-hidden border",children:G.virtualTour.videoUrl?(0,r.jsx)("iframe",{src:G.virtualTour.videoUrl,title:"Recorrido Virtual",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"}):(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Ingresa una URL de video para ver la vista previa"})})})]})]})})]})}),(0,r.jsx)(g,{value:"gallery",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Galer\xeda de Im\xe1genes"})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"gallery-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"gallery-title",value:G.gallery.title,onChange:e=>ee("gallery","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"gallery-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"gallery-subtitle",value:G.gallery.subtitle,onChange:e=>ee("gallery","subtitle",e.target.value)})]})]}),(0,r.jsx)(X,{items:G.gallery.items,onItemsChange:e=>ee("gallery","items",e)})]})]})}),(0,r.jsx)(g,{value:"services",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Servicios"})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"services-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"services-title",value:G.services.title,onChange:e=>ee("services","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"services-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"services-subtitle",value:G.services.subtitle,onChange:e=>ee("services","subtitle",e.target.value)})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:G.services.services.map((e,s)=>(0,r.jsx)(n.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("h4",{className:"font-medium",children:["Servicio ",s+1]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Nombre"}),(0,r.jsx)(c.I,{value:e.name,onChange:e=>es("services","services",s,"name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Descripci\xf3n"}),(0,r.jsx)(d,{value:e.description,onChange:e=>es("services","services",s,"description",e.target.value),rows:2})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Icono"}),(0,r.jsx)(c.I,{value:e.icon,onChange:e=>es("services","services",s,"icon",e.target.value),placeholder:"bed, wifi, utensils-crossed, etc."})]})]})},s))})]})]})}),(0,r.jsx)(g,{value:"testimonials",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex justify-between items-center",children:["Testimonios",(0,r.jsxs)(l.z,{onClick:()=>{q(e=>({...e,testimonials:{...e.testimonials,reviews:[...e.testimonials.reviews,{name:"Nuevo Usuario",rating:5,comment:"Excelente experiencia en el hostal.",initials:"NU",mapLink:"https://g.co/kgs/example"}]}}))},size:"sm",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Agregar Testimonio"]})]})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"testimonials-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"testimonials-title",value:G.testimonials.title,onChange:e=>ee("testimonials","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"testimonials-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"testimonials-subtitle",value:G.testimonials.subtitle,onChange:e=>ee("testimonials","subtitle",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"testimonials-note",children:"Nota Importante"}),(0,r.jsx)(d,{id:"testimonials-note",value:G.testimonials.note,onChange:e=>ee("testimonials","note",e.target.value),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Rese\xf1as"}),G.testimonials.reviews.map((e,s)=>(0,r.jsxs)(n.Zb,{className:"p-4 border-l-4 border-l-yellow-500",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-lg",children:["Rese\xf1a ",s+1]}),(0,r.jsx)(l.z,{onClick:()=>ea(s),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Nombre"}),(0,r.jsx)(c.I,{value:e.name,onChange:e=>es("testimonials","reviews",s,"name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Comentario"}),(0,r.jsx)(d,{value:e.comment,onChange:e=>es("testimonials","reviews",s,"comment",e.target.value),rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Calificaci\xf3n (1-5)"}),(0,r.jsx)(c.I,{type:"number",min:"1",max:"5",value:e.rating,onChange:e=>es("testimonials","reviews",s,"rating",Number.parseInt(e.target.value)||5)})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Iniciales"}),(0,r.jsx)(c.I,{value:e.initials,onChange:e=>es("testimonials","reviews",s,"initials",e.target.value),placeholder:"MG"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Enlace de Google Maps"}),(0,r.jsx)(c.I,{value:e.mapLink,onChange:e=>es("testimonials","reviews",s,"mapLink",e.target.value),placeholder:"https://g.co/kgs/..."})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Vista previa:"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"bg-teal-500 w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:e.initials}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-sm",children:e.name}),(0,r.jsx)("div",{className:"flex text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((s,a)=>(0,r.jsx)(I.Z,{className:"w-3 h-3 ".concat(a<e.rating?"fill-current":"stroke-current")},a))})]})]})]})]})]})]},s))]})]})]})}),(0,r.jsx)(g,{value:"contact",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Informaci\xf3n de Contacto"})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"contact-title",value:G.contact.title,onChange:e=>ee("contact","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-whatsapp",children:"WhatsApp"}),(0,r.jsx)(c.I,{id:"contact-whatsapp",value:G.contact.whatsapp,onChange:e=>ee("contact","whatsapp",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-description",children:"Descripci\xf3n"}),(0,r.jsx)(d,{id:"contact-description",value:G.contact.description,onChange:e=>ee("contact","description",e.target.value),rows:3})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-email",children:"Email"}),(0,r.jsx)(c.I,{id:"contact-email",value:G.contact.email,onChange:e=>ee("contact","email",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-address",children:"Direcci\xf3n"}),(0,r.jsx)(c.I,{id:"contact-address",value:G.contact.address,onChange:e=>ee("contact","address",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Redes Sociales"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-facebook",children:"Facebook"}),(0,r.jsx)(c.I,{id:"contact-facebook",value:G.contact.socialLinks.facebook,onChange:e=>ee("contact","socialLinks",{...G.contact.socialLinks,facebook:e.target.value}),placeholder:"https://facebook.com/..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-instagram",children:"Instagram"}),(0,r.jsx)(c.I,{id:"contact-instagram",value:G.contact.socialLinks.instagram,onChange:e=>ee("contact","socialLinks",{...G.contact.socialLinks,instagram:e.target.value}),placeholder:"https://instagram.com/..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-youtube",children:"YouTube"}),(0,r.jsx)(c.I,{id:"contact-youtube",value:G.contact.socialLinks.youtube,onChange:e=>ee("contact","socialLinks",{...G.contact.socialLinks,youtube:e.target.value}),placeholder:"https://youtube.com/..."})]})]})]})]})]})})]})]})]}):null}},5613:function(e,s,a){"use strict";a.d(s,{X:function(){return o},bZ:function(){return c}});var r=a(7437),t=a(2265),i=a(535),l=a(4508);let n=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=t.forwardRef((e,s)=>{let{className:a,variant:t,...i}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(n({variant:t}),a),...i})});c.displayName="Alert",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...t})}).displayName="AlertTitle";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...t})});o.displayName="AlertDescription"},5186:function(e,s,a){"use strict";a.d(s,{I:function(){return l}});var r=a(7437),t=a(2265),i=a(4508);let l=t.forwardRef((e,s)=>{let{className:a,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"},6815:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var r=a(7437),t=a(2265),i=a(6394),l=a(535),n=a(4508);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(i.f,{ref:s,className:(0,n.cn)(c(),a),...t})});o.displayName=i.f.displayName},5153:function(e,s,a){"use strict";a.d(s,{Am:function(){return m},pm:function(){return u}});var r=a(2265);let t=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],o={toasts:[]};function d(e){o=n(o,e),c.forEach(e=>{e(o)})}function m(e){let{...s}=e,a=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,s]=r.useState(o);return r.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},1985:function(e,s,a){"use strict";a.d(s,{NC:function(){return o},_x:function(){return n},vS:function(){return l},yv:function(){return c}});var r=a(7293),t=a(2148);r.I8&&(0,t.Fb)(r.I8,t.a$).catch(e=>{console.error("Error configurando persistencia:",e)});let i=["admin@caprilandia.com","test@caprilandia.com"];async function l(e,s){if(!r.I8)return console.error("\uD83D\uDEAB Firebase Auth no est\xe1 disponible"),{success:!1,error:"Firebase Auth no est\xe1 disponible"};try{let a=(await (0,t.e5)(r.I8,e,s)).user;if(i.includes(e))return{success:!0,user:a};if(!(await a.getIdTokenResult()).claims.admin)throw await (0,t.w7)(r.I8),Error("No tienes permisos de administrador");return{success:!0,user:a}}catch(s){console.error("❌ Error en login:",s);let e="Error desconocido";if(s instanceof Error)switch(s.message){case"Firebase: Error (auth/user-not-found).":e="Usuario no encontrado";break;case"Firebase: Error (auth/wrong-password).":e="Contrase\xf1a incorrecta";break;case"Firebase: Error (auth/invalid-email).":e="Email inv\xe1lido";break;case"Firebase: Error (auth/network-request-failed).":e="Error de conexi\xf3n. Verifica tu internet.";break;default:e=s.message}return{success:!1,error:e}}}async function n(){if(!r.I8)return{success:!1,error:"Firebase Auth no est\xe1 disponible"};try{return await (0,t.w7)(r.I8),{success:!0}}catch(e){return console.error("❌ Error en logout:",e),{success:!1,error:e instanceof Error?e.message:"Error al cerrar sesi\xf3n"}}}function c(e){return r.I8?(0,t.Aj)(r.I8,s=>{e(s)}):(e(null),()=>{})}async function o(){if(!r.I8)return!1;try{let e=r.I8.currentUser;if(!e)return!1;if(i.includes(e.email||""))return!0;return!!(await e.getIdTokenResult()).claims.admin}catch(e){return console.error("❌ Error verificando admin:",e),!1}}},1020:function(e,s,a){"use strict";a.d(s,{m:function(){return n}});var r=a(7293),t=a(6485);let i=["image/jpeg","image/jpg","image/png","image/webp"],l=["video/mp4","video/webm","video/quicktime"];class n{static async checkStorageConnection(){if(!r.tO)return!1;try{return(0,t.iH)(r.tO,"test-connection"),!0}catch(e){return console.error("❌ Error de conexi\xf3n a Firebase Storage:",e),!1}}static validateFile(e){let s=[...i,...l];return s.includes(e.type)?e.size>52428800?{valid:!1,error:"Archivo muy grande: ".concat((e.size/1024/1024).toFixed(2),"MB. M\xe1ximo permitido: ").concat(50,"MB")}:{valid:!0}:{valid:!1,error:"Tipo de archivo no permitido: ".concat(e.type,". Tipos permitidos: ").concat(s.join(", "))}}static async uploadFile(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media",a=this.validateFile(e);if(!a.valid)throw Error(a.error);try{return await this.uploadFileViaAPI(e,s)}catch(e){throw console.error("❌ Error en API fallback:",e),Error("Error subiendo archivo: ".concat(e instanceof Error?e.message:"Error desconocido"))}}static async uploadFileViaAPI(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media",a=new FormData;a.append("file",e),a.append("folder",s);let r=await fetch("/api/upload",{method:"POST",body:a});if(!r.ok)throw Error("API upload failed: ".concat(r.statusText));let t=await r.json();if(!t.success)throw Error(t.error||"API upload failed");return{url:t.url,type:t.type,filename:t.filename,path:t.path}}static async deleteFile(e){if(!r.tO)throw Error("Firebase Storage no est\xe1 inicializado");let s=r.tO;try{let a=(0,t.iH)(s,e);await (0,t.oq)(a)}catch(e){throw console.error("❌ Error eliminando archivo:",e),Error("Error eliminando archivo: ".concat(e instanceof Error?e.message:"Error desconocido"))}}static async generateVideoThumbnail(e){return new Promise((s,a)=>{let r=document.createElement("video"),t=document.createElement("canvas"),i=t.getContext("2d");if(!i){a(Error("No se pudo crear contexto de canvas"));return}r.onloadedmetadata=()=>{t.width=r.videoWidth||640,t.height=r.videoHeight||360,r.currentTime=Math.min(1,.1*r.duration)},r.onseeked=()=>{i.drawImage(r,0,0,t.width,t.height),s(t.toDataURL("image/jpeg",.8)),URL.revokeObjectURL(r.src)},r.onerror=e=>{console.error("❌ Error generando thumbnail:",e),a(Error("Error generando miniatura del video"))},r.src=URL.createObjectURL(e)})}static async resizeImage(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080;return new Promise((r,t)=>{let i=new Image,l=document.createElement("canvas"),n=l.getContext("2d");if(!n){t(Error("No se pudo crear contexto de canvas"));return}i.onload=()=>{let{width:c,height:o}=i;c>s&&(o=o*s/c,c=s),o>a&&(c=c*a/o,o=a),l.width=c,l.height=o,n.drawImage(i,0,0,c,o),l.toBlob(e=>{e?r(e):t(Error("Error convirtiendo imagen"))},e.type,.9)},i.onerror=()=>{t(Error("Error cargando imagen"))},i.src=URL.createObjectURL(e)})}}},7293:function(e,s,a){"use strict";let r;a.d(s,{I8:function(){return c},tO:function(){return o}});var t=a(738),i=a(5978),l=a(2148),n=a(6485);r=0===(0,t.C6)().length?(0,t.ZF)({apiKey:"AIzaSyAJd6zyhkkqVjuQWb6thS05UeD8-rCaCZ0",authDomain:"carilandia-base.firebaseapp.com",projectId:"carilandia-base",storageBucket:"carilandia-base.firebasestorage.app",messagingSenderId:"841945640213",appId:"1:841945640213:web:35cec3e1e3c91085db0d1c",measurementId:"G-HXPX889G7H"}):(0,t.C6)()[0];let c=null,o=null;try{(0,i.ad)(r),c=(0,l.v0)(r),o=(0,n.cF)(r)}catch(e){console.error("❌ Error inicializando Firebase:",e),c=null,o=null}}},function(e){e.O(0,[609,15,569,365,481,812,118,170,971,117,744],function(){return e(e.s=5681)}),_N_E=e.O()}]);