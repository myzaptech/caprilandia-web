(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{5681:function(e,a,s){Promise.resolve().then(s.bind(s,6678))},6678:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return ee}});var r=s(7437),t=s(2265),i=s(9376),l=s(2869),n=s(6070),c=s(5186),o=s(4508);let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...t})});d.displayName="Textarea";var m=s(6815),u=s(1312);let h=u.fC,x=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(u.aV,{ref:a,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t})});x.displayName=u.aV.displayName;let v=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(u.xz,{ref:a,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t})});v.displayName=u.xz.displayName;let g=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(u.VY,{ref:a,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t})});g.displayName=u.VY.displayName;var p=s(5974),j=s(5613),f=s(9322),b=s(2613),N=s(7692),y=s(9397),w=s(7168),C=s(3229),I=s(8906),k=s(6595),E=s(8930),_=s(2369),S=s(1239),z=s(5153),T=s(6012),Z=s(1985),F=s(3145),A=s(3113),R=s(7689),D=s(2489),O=s(1020);function P(e){let{currentImage:a,onImageChange:s,label:i="Imagen",aspectRatio:n="landscape",maxSize:c=5}=e,[o,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),x=(0,t.useRef)(null),v=async e=>{if(e){if(!e.type.startsWith("image/")){alert("Por favor selecciona solo archivos de imagen");return}if(e.size>1048576*c){alert("El archivo es muy grande. M\xe1ximo ".concat(c,"MB"));return}d(!0);try{let a=await O.m.uploadFile(e,"images");s(a.url)}catch(e){console.error("❌ Error subiendo imagen:",e),alert("Error al subir la imagen: ".concat(e instanceof Error?e.message:"Error desconocido"))}finally{d(!1)}}},g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)},p=()=>{switch(n){case"square":return"aspect-square";case"portrait":return"aspect-[3/4]";default:return"aspect-video"}};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(m._,{className:"text-sm font-medium",children:i}),a?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"relative ".concat(p()," rounded-lg overflow-hidden border"),children:(0,r.jsx)(F.default,{src:a||"/placeholder.svg",alt:i,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),(0,r.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(l.z,{onClick:()=>{s(""),x.current&&(x.current.value="")},variant:"destructive",size:"sm",className:"h-8 w-8 p-0",children:(0,r.jsx)(D.Z,{className:"w-4 h-4"})})}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)(l.z,{onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},variant:"outline",size:"sm",disabled:o,children:[(0,r.jsx)(R.Z,{className:"w-4 h-4 mr-2"}),"Cambiar imagen"]})})]}):(0,r.jsx)("div",{className:"relative ".concat(p()," border-2 border-dashed rounded-lg transition-colors ").concat(u?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"),onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{var a;e.preventDefault(),e.stopPropagation(),h(!1);let s=null===(a=e.dataTransfer.files)||void 0===a?void 0:a[0];s&&v(s)},children:(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center",children:[(0,r.jsx)(A.Z,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Arrastra una imagen aqu\xed o haz clic para seleccionar"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:["PNG, JPG, WEBP hasta ",c,"MB"]}),(0,r.jsxs)(l.z,{onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},variant:"outline",disabled:o,children:[(0,r.jsx)(R.Z,{className:"w-4 h-4 mr-2"}),o?"Subiendo...":"Seleccionar imagen"]})]})}),(0,r.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&v(s)},className:"hidden"}),o&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-teal-600 mr-2"}),"Procesando imagen..."]})]})}var V=s(7638),L=s(401),M=s(875),U=s(2135);let G=V.fC;V.ZA;let q=V.B4,B=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsxs)(V.xz,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[t,(0,r.jsx)(V.JO,{asChild:!0,children:(0,r.jsx)(M.Z,{className:"h-4 w-4 opacity-50"})})]})});B.displayName=V.xz.displayName;let Y=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(V.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(U.Z,{className:"h-4 w-4"})})});Y.displayName=V.u_.displayName;let H=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(V.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})});H.displayName=V.$G.displayName;let W=t.forwardRef((e,a)=>{let{className:s,children:t,position:i="popper",...l}=e;return(0,r.jsx)(V.h_,{children:(0,r.jsxs)(V.VY,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,r.jsx)(Y,{}),(0,r.jsx)(V.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(H,{})]})})});W.displayName=V.VY.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(V.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=V.__.displayName;let J=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsxs)(V.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(V.wU,{children:(0,r.jsx)(L.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(V.eT,{children:t})]})});J.displayName=V.ck.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(V.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=V.Z0.displayName;var $=s(9374);function X(e){let{currentVideo:a,onVideoChange:s,onThumbnailChange:i,label:n="Video",maxSize:c=50}=e,[o,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),x=(0,t.useRef)(null),v=async e=>{if(e){if(!e.type.startsWith("video/")){alert("Por favor selecciona solo archivos de video (MP4, WebM, MOV)");return}if(e.size>1048576*c){alert("El archivo es muy grande. M\xe1ximo ".concat(c,"MB"));return}d(!0);try{let a=await O.m.uploadFile(e,"videos");s(a.url);try{let a=await g(e);if(a&&i){let s=await fetch(a),r=await s.blob(),t=new File([r],"thumbnail_".concat(e.name.replace(/\.[^/.]+$/,""),".jpg"),{type:"image/jpeg"});URL.revokeObjectURL(a);let l=await O.m.uploadFile(t,"thumbnails");i(l.url)}}catch(e){}}catch(e){console.error("❌ Error subiendo video:",e),alert("Error al subir el video: ".concat(e instanceof Error?e.message:"Error desconocido"))}finally{d(!1)}}},g=e=>new Promise(a=>{let s=document.createElement("video"),r=document.createElement("canvas"),t=r.getContext("2d");s.onloadedmetadata=()=>{r.width=s.videoWidth,r.height=s.videoHeight,s.currentTime=1},s.onseeked=()=>{t&&(t.drawImage(s,0,0),r.toBlob(e=>{e?a(URL.createObjectURL(e)):a("")},"image/jpeg",.8))},s.onerror=()=>{a("")},s.src=URL.createObjectURL(e)}),p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)};return(0,r.jsxs)("div",{className:"space-y-3",children:[n&&(0,r.jsx)(m._,{className:"text-sm font-medium",children:n}),(0,r.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg transition-colors ".concat(u?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"," ").concat("aspect-video"),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1);let a=e.dataTransfer.files;a&&a[0]&&v(a[0])},children:[a?(0,r.jsxs)("div",{className:"relative w-full h-full",children:[(0,r.jsx)("video",{src:a,className:"w-full h-full object-cover rounded-lg",controls:!0,preload:"metadata",children:"Tu navegador no soporta la reproducci\xf3n de videos."}),(0,r.jsx)(l.z,{onClick:()=>{s(""),i&&i("")},variant:"destructive",size:"sm",className:"absolute top-2 right-2",children:(0,r.jsx)(D.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center h-full",children:[(0,r.jsx)($.Z,{className:"w-8 h-8 mb-3 ".concat(u?"text-teal-500":"text-gray-400")}),(0,r.jsx)("p",{className:"text-sm mb-2 ".concat(u?"text-teal-600":"text-gray-600"),children:u?"Suelta el video aqu\xed":"Arrastra un video aqu\xed"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"o"}),(0,r.jsxs)(l.z,{onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},variant:"outline",size:"sm",disabled:o,children:[(0,r.jsx)(R.Z,{className:"w-4 h-4 mr-2"}),o?"Subiendo...":"Seleccionar Video"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["MP4, WebM, MOV (m\xe1x. ",c,"MB)"]})]}),(0,r.jsx)("input",{ref:x,type:"file",accept:"video/mp4,video/webm,video/quicktime,video/x-msvideo",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&v(s)},className:"hidden"})]})]})}function K(e){let{items:a,onItemsChange:s}=e,t=e=>{s([...a,{type:e,url:"",alt:"image"===e?"Nueva imagen":"Nuevo video",..."video"===e&&{thumbnail:""}}])},i=e=>{s(a.filter((a,s)=>s!==e))},o=(e,r,t)=>{s(a.map((a,s)=>s===e?{...a,[r]:t}:a))},d=(e,r)=>{s(a.map((a,s)=>{if(s===e){let e={...a,type:r,url:""};if("video"===r)return{...e,thumbnail:""};{let{thumbnail:a,...s}=e;return s}}return a}))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:["Galer\xeda Multimedia (",a.length," elementos)"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.z,{onClick:()=>t("image"),size:"sm",variant:"outline",children:[(0,r.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Agregar Imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>t("video"),size:"sm",variant:"outline",children:[(0,r.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"Agregar Video"]})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((e,a)=>(0,r.jsx)(n.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["image"===e.type?(0,r.jsx)(A.Z,{className:"w-4 h-4 text-blue-600"}):(0,r.jsx)($.Z,{className:"w-4 h-4 text-purple-600"}),(0,r.jsxs)(m._,{className:"font-medium",children:["image"===e.type?"Imagen":"Video"," ",a+1]})]}),(0,r.jsx)(l.z,{onClick:()=>i(a),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Tipo de contenido"}),(0,r.jsxs)(G,{value:e.type,onValueChange:e=>d(a,e),children:[(0,r.jsx)(B,{children:(0,r.jsx)(q,{})}),(0,r.jsxs)(W,{children:[(0,r.jsx)(J,{value:"image",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(A.Z,{className:"w-4 h-4"}),"Imagen"]})}),(0,r.jsx)(J,{value:"video",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)($.Z,{className:"w-4 h-4"}),"Video"]})})]})]})]}),"image"===e.type?(0,r.jsx)(P,{currentImage:e.url,onImageChange:e=>o(a,"url",e),label:"",aspectRatio:"landscape"}):(0,r.jsx)(X,{currentVideo:e.url,onVideoChange:e=>o(a,"url",e),onThumbnailChange:e=>o(a,"thumbnail",e),label:"",maxSize:50}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"alt-".concat(a),children:"Descripci\xf3n"}),(0,r.jsx)(c.I,{id:"alt-".concat(a),value:e.alt,onChange:e=>o(a,"alt",e.target.value),placeholder:"Descripci\xf3n del ".concat("image"===e.type?"imagen":"video")})]})]})},a))}),0===a.length&&(0,r.jsxs)("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,r.jsx)(R.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"No hay elementos en la galer\xeda"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsxs)(l.z,{onClick:()=>t("image"),variant:"outline",children:[(0,r.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Agregar primera imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>t("video"),variant:"outline",children:[(0,r.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"Agregar primer video"]})]})]})]})}function Q(e){let{media:a,onMediaChange:s,roomName:t}=e,i=e=>{s([...a,{type:e,url:"",alt:"".concat(t," - ").concat("image"===e?"Imagen":"Video"),..."video"===e&&{thumbnail:""}}])},o=e=>{s(a.filter((a,s)=>s!==e))},d=(e,r,t)=>{s(a.map((a,s)=>s===e?{...a,[r]:t}:a))},u=(e,r)=>{s(a.map((a,s)=>{if(s===e){let e={...a,type:r,url:"",alt:"".concat(t," - ").concat("image"===r?"Imagen":"Video")};if("video"===r)return{...e,thumbnail:""};{let{thumbnail:a,...s}=e;return s}}return a}))};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-700",children:["Galer\xeda de ",t," (",a.length," archivos)"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.z,{onClick:()=>i("image"),size:"sm",variant:"outline",children:[(0,r.jsx)(A.Z,{className:"w-3 h-3 mr-1"}),"Imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>i("video"),size:"sm",variant:"outline",children:[(0,r.jsx)($.Z,{className:"w-3 h-3 mr-1"}),"Video"]})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:a.map((e,a)=>(0,r.jsx)(n.Zb,{className:"p-3",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["image"===e.type?(0,r.jsx)(A.Z,{className:"w-3 h-3 text-blue-600"}):(0,r.jsx)($.Z,{className:"w-3 h-3 text-purple-600"}),(0,r.jsxs)(m._,{className:"text-sm font-medium",children:["image"===e.type?"Imagen":"Video"," ",a+1]})]}),(0,r.jsx)(l.z,{onClick:()=>o(a),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 h-6 w-6 p-0",children:(0,r.jsx)(E.Z,{className:"w-3 h-3"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{className:"text-xs",children:"Tipo"}),(0,r.jsxs)(G,{value:e.type,onValueChange:e=>u(a,e),children:[(0,r.jsx)(B,{className:"h-8",children:(0,r.jsx)(q,{})}),(0,r.jsxs)(W,{children:[(0,r.jsx)(J,{value:"image",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(A.Z,{className:"w-3 h-3"}),"Imagen"]})}),(0,r.jsx)(J,{value:"video",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)($.Z,{className:"w-3 h-3"}),"Video"]})})]})]})]}),"image"===e.type?(0,r.jsx)(P,{currentImage:e.url,onImageChange:e=>d(a,"url",e),label:"",aspectRatio:"landscape"}):(0,r.jsx)(X,{currentVideo:e.url,onVideoChange:e=>d(a,"url",e),onThumbnailChange:e=>d(a,"thumbnail",e),label:"",maxSize:30}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"alt-".concat(a),className:"text-xs",children:"Descripci\xf3n"}),(0,r.jsx)(c.I,{id:"alt-".concat(a),value:e.alt,onChange:e=>d(a,"alt",e.target.value),placeholder:"Descripci\xf3n del ".concat("image"===e.type?"imagen":"video"),className:"h-8 text-xs"})]})]})},a))}),0===a.length&&(0,r.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,r.jsx)(R.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"No hay archivos multimedia para esta habitaci\xf3n"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsxs)(l.z,{onClick:()=>i("image"),variant:"outline",size:"sm",children:[(0,r.jsx)(A.Z,{className:"w-3 h-3 mr-1"}),"Primera imagen"]}),(0,r.jsxs)(l.z,{onClick:()=>i("video"),variant:"outline",size:"sm",children:[(0,r.jsx)($.Z,{className:"w-3 h-3 mr-1"}),"Primer video"]})]})]})]})}function ee(){var e,a,s,o;let u=(0,i.useRouter)(),[F,A]=(0,t.useState)(!1),[R,D]=(0,t.useState)(!0),[O,V]=(0,t.useState)("hero"),[L,M]=(0,t.useState)(!1),[U,G]=(0,t.useState)(""),{content:q,setContent:B,saveChanges:Y,isLoading:H,error:W,isConnected:J,refreshContent:$}=(0,T.r)();(0,t.useEffect)(()=>{let e=(0,Z.yv)(async e=>{e?await (0,Z.NC)()?(A(!0),G(e.email||"")):(await (0,Z._x)(),u.push("/admin/login")):(A(!1),u.push("/admin/login")),D(!1)});return()=>e()},[u]);let X=async()=>{try{await (0,Z._x)(),u.push("/admin/login")}catch(e){console.error("Error al cerrar sesi\xf3n:",e),(0,z.Am)({title:"Error",description:"No se pudo cerrar la sesi\xf3n correctamente",variant:"destructive"})}},ee=async()=>{M(!0);try{let e=await Y();e.success?(0,z.Am)({title:"✅ Guardado exitoso",description:"Los cambios se han guardado correctamente."}):(0,z.Am)({title:"❌ Error al guardar",description:e.error||"No se pudo guardar el contenido.",variant:"destructive"})}catch(e){(0,z.Am)({title:"❌ Error",description:"Ocurri\xf3 un error inesperado al guardar.",variant:"destructive"})}finally{M(!1)}},[ea,es]=(0,t.useState)(!1),er=async()=>{if(confirm("\xbfEst\xe1s seguro? Esto limpiar\xe1 TODAS las referencias a archivos de uploads inexistentes.")){es(!0);try{let e=await fetch("/api/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cleanupAll:!0})}),a=await e.json();if(a.success)a.cleaned?((0,z.Am)({title:"\uD83E\uDDF9 Limpieza completada",description:"Se han limpiado todas las referencias a archivos inexistentes."}),await $()):(0,z.Am)({title:"ℹ️ Sin cambios",description:"No se encontraron referencias a archivos para limpiar."});else throw Error(a.error||"Error en la limpieza")}catch(e){(0,z.Am)({title:"❌ Error en limpieza",description:"No se pudo completar la limpieza de archivos.",variant:"destructive"})}finally{es(!1)}}},et=(e,a,s)=>{B(r=>({...r,[e]:{...r[e],[a]:s}}))},ei=(e,a,s,r,t)=>{B(i=>({...i,[e]:{...i[e],[a]:i[e][a].map((e,a)=>a===s?{...e,[r]:t}:e)}}))},el=e=>{B(a=>({...a,testimonials:{...a.testimonials,reviews:a.testimonials.reviews.filter((a,s)=>s!==e)}}))},en=e=>{B(a=>({...a,rooms:{...a.rooms,rooms:a.rooms.rooms.filter((a,s)=>s!==e)}}))};return R||H?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teal-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:R?"Verificando autenticaci\xf3n...":"Cargando contenido..."})]})}):F?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"bg-teal-600 p-2 rounded",children:(0,r.jsx)(I.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.C,{variant:"secondary",className:"text-xs",children:"☁️ Firebase Storage"}),(0,r.jsxs)(p.C,{className:"text-xs bg-green-100 text-green-800",children:[(0,r.jsx)(S.Z,{className:"w-3 h-3 mr-1"}),"Auto-guardado activo"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(_.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:U})]}),(0,r.jsxs)(l.z,{onClick:$,variant:"outline",size:"sm",disabled:H,children:[(0,r.jsx)(w.Z,{className:"w-4 h-4 mr-2 ".concat(H?"animate-spin":"")}),"Actualizar"]}),(0,r.jsxs)(l.z,{onClick:er,variant:"outline",size:"sm",disabled:ea,children:[(0,r.jsx)(b.Z,{className:"w-4 h-4 mr-2 ".concat(ea?"animate-spin":"")}),ea?"Limpiando...":"Limpiar Uploads"]}),(0,r.jsxs)(l.z,{onClick:ee,className:"bg-teal-600 hover:bg-teal-700",size:"sm",disabled:L,children:[(0,r.jsx)(C.Z,{className:"w-4 h-4 mr-2 ".concat(L?"animate-spin":"")}),L?"Guardando...":"Guardar Ahora"]}),(0,r.jsxs)(l.z,{onClick:X,variant:"outline",size:"sm",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Salir"]})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[W&&(0,r.jsxs)(j.bZ,{className:"mb-6 border-blue-200 bg-blue-50",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(j.X,{className:"text-blue-800",children:W})]}),(0,r.jsxs)(h,{value:O,onValueChange:V,className:"space-y-6",children:[(0,r.jsxs)(x,{className:"grid w-full grid-cols-5 lg:grid-cols-9 gap-1",children:[(0,r.jsx)(v,{value:"site",className:"text-xs",children:"Sitio"}),(0,r.jsx)(v,{value:"hero",className:"text-xs",children:"Inicio"}),(0,r.jsx)(v,{value:"about",className:"text-xs",children:"Acerca"}),(0,r.jsx)(v,{value:"rooms",className:"text-xs",children:"Habitaciones"}),(0,r.jsx)(v,{value:"tour",className:"text-xs",children:"Tour"}),(0,r.jsx)(v,{value:"gallery",className:"text-xs",children:"Galer\xeda"}),(0,r.jsx)(v,{value:"services",className:"text-xs",children:"Servicios"}),(0,r.jsx)(v,{value:"testimonials",className:"text-xs",children:"Testimonios"}),(0,r.jsx)(v,{value:"contact",className:"text-xs",children:"Contacto"})]}),(0,r.jsx)(g,{value:"site",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Configuraci\xf3n del Sitio"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"site-title",children:"T\xedtulo del Sitio (aparece en la pesta\xf1a del navegador)"}),(0,r.jsx)(c.I,{id:"site-title",value:(null===(e=q.siteConfig)||void 0===e?void 0:e.title)||"",onChange:e=>et("siteConfig","title",e.target.value),placeholder:"Hostal Caprilandia - Donde la tradici\xf3n y la comodidad se encuentran"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"site-description",children:"Descripci\xf3n del Sitio (para SEO)"}),(0,r.jsx)(d,{id:"site-description",value:(null===(a=q.siteConfig)||void 0===a?void 0:a.description)||"",onChange:e=>et("siteConfig","description",e.target.value),rows:3,placeholder:"Descripci\xf3n que aparecer\xe1 en los resultados de b\xfasqueda"})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(P,{currentImage:null===(s=q.siteConfig)||void 0===s?void 0:s.logo,onImageChange:e=>et("siteConfig","logo",e),label:"Logo del Negocio - aparece en la navegaci\xf3n y footer",aspectRatio:"square",maxSize:2}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsx)("p",{children:"• Recomendado: 64x64 p\xedxeles o mayor"}),(0,r.jsx)("p",{children:"• Formato: PNG, JPG, o SVG"}),(0,r.jsx)("p",{children:"• Tama\xf1o m\xe1ximo: 2MB"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(P,{currentImage:null===(o=q.siteConfig)||void 0===o?void 0:o.favicon,onImageChange:e=>et("siteConfig","favicon",e),label:"Icono del Sitio (Favicon) - aparece en la pesta\xf1a del navegador",aspectRatio:"square",maxSize:1}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsx)("p",{children:"• Recomendado: 32x32 p\xedxeles o 64x64 p\xedxeles"}),(0,r.jsx)("p",{children:"• Formato: PNG, ICO, o JPG"}),(0,r.jsx)("p",{children:"• Tama\xf1o m\xe1ximo: 1MB"})]})]})]})]})})]})}),(0,r.jsx)(g,{value:"hero",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Secci\xf3n Principal (Hero)"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"hero-title",children:"T\xedtulo Principal"}),(0,r.jsx)(c.I,{id:"hero-title",value:q.hero.title,onChange:e=>et("hero","title",e.target.value),className:"text-lg font-semibold"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"hero-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(d,{id:"hero-subtitle",value:q.hero.subtitle,onChange:e=>et("hero","subtitle",e.target.value),rows:3})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(P,{currentImage:q.hero.backgroundImage,onImageChange:e=>et("hero","backgroundImage",e),label:"Imagen de Fondo Principal",aspectRatio:"landscape"})})]})})]})}),(0,r.jsx)(g,{value:"about",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Secci\xf3n Acerca de"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"about-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"about-title",value:q.about.title,onChange:e=>et("about","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"about-desc1",children:"Primer P\xe1rrafo"}),(0,r.jsx)(d,{id:"about-desc1",value:q.about.description1,onChange:e=>et("about","description1",e.target.value),rows:4})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"about-desc2",children:"Segundo P\xe1rrafo"}),(0,r.jsx)(d,{id:"about-desc2",value:q.about.description2,onChange:e=>et("about","description2",e.target.value),rows:3})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(P,{currentImage:q.about.image,onImageChange:e=>et("about","image",e),label:"Imagen de la Secci\xf3n Acerca de",aspectRatio:"landscape"})})]})})]})}),(0,r.jsx)(g,{value:"rooms",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex justify-between items-center",children:["Secci\xf3n Habitaciones (",q.rooms.rooms.length," habitaciones)",(0,r.jsxs)(l.z,{onClick:()=>{B(e=>({...e,rooms:{...e.rooms,rooms:[...e.rooms.rooms,{name:"Nueva Habitaci\xf3n",description:"Descripci\xf3n de la habitaci\xf3n",price:"",showPrice:!1,image:"",features:["Cama doble","Ba\xf1o privado","WiFi"],popular:!1}]}}))},size:"sm",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Agregar Habitaci\xf3n"]})]})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"rooms-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"rooms-title",value:q.rooms.title,onChange:e=>et("rooms","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"rooms-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"rooms-subtitle",value:q.rooms.subtitle,onChange:e=>et("rooms","subtitle",e.target.value)})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Habitaciones"}),q.rooms.rooms.map((e,a)=>(0,r.jsxs)(n.Zb,{className:"p-6 border-l-4 border-l-teal-500",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-lg",children:["Habitaci\xf3n ",a+1,": ",e.name]}),(0,r.jsx)(l.z,{onClick:()=>en(a),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Nombre"}),(0,r.jsx)(c.I,{value:e.name,onChange:e=>ei("rooms","rooms",a,"name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Descripci\xf3n"}),(0,r.jsx)(d,{value:e.description,onChange:e=>ei("rooms","rooms",a,"description",e.target.value),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"show-price-".concat(a),checked:e.showPrice||!1,onChange:e=>ei("rooms","rooms",a,"showPrice",e.target.checked)}),(0,r.jsx)(m._,{htmlFor:"show-price-".concat(a),className:"font-medium",children:"Mostrar precio para esta habitaci\xf3n"})]}),e.showPrice&&(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Precio"}),(0,r.jsx)(c.I,{value:e.price||"",onChange:e=>ei("rooms","rooms",a,"price",e.target.value),placeholder:"Ej: $120/noche, Consultar, Desde $100"})]}),!e.showPrice&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:'El bot\xf3n mostrar\xe1 "Consultar Disponibilidad" en lugar de "Reservar"'})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(m._,{children:["Caracter\xedsticas (",e.features.length,")"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[e.features.map((s,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.I,{value:s,onChange:s=>{let r=[...e.features];r[t]=s.target.value,ei("rooms","rooms",a,"features",r)},placeholder:"Caracter\xedstica"}),(0,r.jsx)(l.z,{onClick:()=>{ei("rooms","rooms",a,"features",e.features.filter((e,a)=>a!==t))},variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]},"feature-".concat(a,"-").concat(t))),(0,r.jsxs)(l.z,{onClick:()=>{ei("rooms","rooms",a,"features",[...e.features,"Nueva caracter\xedstica"])},variant:"outline",size:"sm",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Agregar Caracter\xedstica"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"popular-".concat(a),checked:e.popular||!1,onChange:e=>ei("rooms","rooms",a,"popular",e.target.checked)}),(0,r.jsx)(m._,{htmlFor:"popular-".concat(a),children:"Marcar como popular"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(P,{currentImage:e.image,onImageChange:e=>ei("rooms","rooms",a,"image",e),label:"Imagen principal de ".concat(e.name),aspectRatio:"landscape"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Esta ser\xe1 la imagen que aparece en la vista previa de la habitaci\xf3n"})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(Q,{media:e.media||[],onMediaChange:e=>ei("rooms","rooms",a,"media",e),roomName:e.name})})]})]},"room-".concat(a)))]})]})]})}),(0,r.jsx)(g,{value:"tour",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Tour Virtual"})}),(0,r.jsx)(n.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"tour-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"tour-title",value:q.virtualTour.title,onChange:e=>et("virtualTour","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"tour-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"tour-subtitle",value:q.virtualTour.subtitle,onChange:e=>et("virtualTour","subtitle",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"tour-videoUrl",children:"URL del Video (YouTube Embed)"}),(0,r.jsx)(c.I,{id:"tour-videoUrl",value:q.virtualTour.videoUrl,onChange:e=>et("virtualTour","videoUrl",e.target.value),placeholder:"https://www.youtube.com/embed/your_video_id"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(m._,{children:"Vista Previa del Video"}),(0,r.jsx)("div",{className:"relative aspect-video rounded-lg overflow-hidden border",children:q.virtualTour.videoUrl?(0,r.jsx)("iframe",{src:q.virtualTour.videoUrl,title:"Recorrido Virtual",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"}):(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Ingresa una URL de video para ver la vista previa"})})})]})]})})]})}),(0,r.jsx)(g,{value:"gallery",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Galer\xeda de Im\xe1genes"})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"gallery-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"gallery-title",value:q.gallery.title,onChange:e=>et("gallery","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"gallery-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"gallery-subtitle",value:q.gallery.subtitle,onChange:e=>et("gallery","subtitle",e.target.value)})]})]}),(0,r.jsx)(K,{items:q.gallery.items,onItemsChange:e=>et("gallery","items",e)})]})]})}),(0,r.jsx)(g,{value:"services",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Servicios"})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"services-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"services-title",value:q.services.title,onChange:e=>et("services","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"services-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"services-subtitle",value:q.services.subtitle,onChange:e=>et("services","subtitle",e.target.value)})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:q.services.services.map((e,a)=>(0,r.jsx)(n.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("h4",{className:"font-medium",children:["Servicio ",a+1]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Nombre"}),(0,r.jsx)(c.I,{value:e.name,onChange:e=>ei("services","services",a,"name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Descripci\xf3n"}),(0,r.jsx)(d,{value:e.description,onChange:e=>ei("services","services",a,"description",e.target.value),rows:2})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Icono"}),(0,r.jsx)(c.I,{value:e.icon,onChange:e=>ei("services","services",a,"icon",e.target.value),placeholder:"bed, wifi, utensils-crossed, etc."})]})]})},a))})]})]})}),(0,r.jsx)(g,{value:"testimonials",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex justify-between items-center",children:["Testimonios",(0,r.jsxs)(l.z,{onClick:()=>{B(e=>({...e,testimonials:{...e.testimonials,reviews:[...e.testimonials.reviews,{name:"Nuevo Usuario",rating:5,comment:"Excelente experiencia en el hostal.",initials:"NU",mapLink:"https://g.co/kgs/example"}]}}))},size:"sm",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Agregar Testimonio"]})]})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"testimonials-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"testimonials-title",value:q.testimonials.title,onChange:e=>et("testimonials","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"testimonials-subtitle",children:"Subt\xedtulo"}),(0,r.jsx)(c.I,{id:"testimonials-subtitle",value:q.testimonials.subtitle,onChange:e=>et("testimonials","subtitle",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"testimonials-note",children:"Nota Importante"}),(0,r.jsx)(d,{id:"testimonials-note",value:q.testimonials.note,onChange:e=>et("testimonials","note",e.target.value),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Rese\xf1as"}),q.testimonials.reviews.map((e,a)=>(0,r.jsxs)(n.Zb,{className:"p-4 border-l-4 border-l-yellow-500",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-lg",children:["Rese\xf1a ",a+1]}),(0,r.jsx)(l.z,{onClick:()=>el(a),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Nombre"}),(0,r.jsx)(c.I,{value:e.name,onChange:e=>ei("testimonials","reviews",a,"name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Comentario"}),(0,r.jsx)(d,{value:e.comment,onChange:e=>ei("testimonials","reviews",a,"comment",e.target.value),rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Calificaci\xf3n (1-5)"}),(0,r.jsx)(c.I,{type:"number",min:"1",max:"5",value:e.rating,onChange:e=>ei("testimonials","reviews",a,"rating",Number.parseInt(e.target.value)||5)})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Iniciales"}),(0,r.jsx)(c.I,{value:e.initials,onChange:e=>ei("testimonials","reviews",a,"initials",e.target.value),placeholder:"MG"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{children:"Enlace de Google Maps"}),(0,r.jsx)(c.I,{value:e.mapLink,onChange:e=>ei("testimonials","reviews",a,"mapLink",e.target.value),placeholder:"https://g.co/kgs/..."})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Vista previa:"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"bg-teal-500 w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:e.initials}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-sm",children:e.name}),(0,r.jsx)("div",{className:"flex text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((a,s)=>(0,r.jsx)(k.Z,{className:"w-3 h-3 ".concat(s<e.rating?"fill-current":"stroke-current")},s))})]})]})]})]})]})]},a))]})]})]})}),(0,r.jsx)(g,{value:"contact",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Informaci\xf3n de Contacto"})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-title",children:"T\xedtulo"}),(0,r.jsx)(c.I,{id:"contact-title",value:q.contact.title,onChange:e=>et("contact","title",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-whatsapp",children:"WhatsApp"}),(0,r.jsx)(c.I,{id:"contact-whatsapp",value:q.contact.whatsapp,onChange:e=>et("contact","whatsapp",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-description",children:"Descripci\xf3n"}),(0,r.jsx)(d,{id:"contact-description",value:q.contact.description,onChange:e=>et("contact","description",e.target.value),rows:3})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-email",children:"Email"}),(0,r.jsx)(c.I,{id:"contact-email",value:q.contact.email,onChange:e=>et("contact","email",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-address",children:"Direcci\xf3n"}),(0,r.jsx)(c.I,{id:"contact-address",value:q.contact.address,onChange:e=>et("contact","address",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Redes Sociales"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-facebook",children:"Facebook"}),(0,r.jsx)(c.I,{id:"contact-facebook",value:q.contact.socialLinks.facebook,onChange:e=>et("contact","socialLinks",{...q.contact.socialLinks,facebook:e.target.value}),placeholder:"https://facebook.com/..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-instagram",children:"Instagram"}),(0,r.jsx)(c.I,{id:"contact-instagram",value:q.contact.socialLinks.instagram,onChange:e=>et("contact","socialLinks",{...q.contact.socialLinks,instagram:e.target.value}),placeholder:"https://instagram.com/..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"contact-youtube",children:"YouTube"}),(0,r.jsx)(c.I,{id:"contact-youtube",value:q.contact.socialLinks.youtube,onChange:e=>et("contact","socialLinks",{...q.contact.socialLinks,youtube:e.target.value}),placeholder:"https://youtube.com/..."})]})]})]})]})]})})]})]})]}):null}},5613:function(e,a,s){"use strict";s.d(a,{X:function(){return o},bZ:function(){return c}});var r=s(7437),t=s(2265),i=s(535),l=s(4508);let n=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=t.forwardRef((e,a)=>{let{className:s,variant:t,...i}=e;return(0,r.jsx)("div",{ref:a,role:"alert",className:(0,l.cn)(n({variant:t}),s),...i})});c.displayName="Alert",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("h5",{ref:a,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",s),...t})}).displayName="AlertTitle";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...t})});o.displayName="AlertDescription"},5186:function(e,a,s){"use strict";s.d(a,{I:function(){return l}});var r=s(7437),t=s(2265),i=s(4508);let l=t.forwardRef((e,a)=>{let{className:s,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...l})});l.displayName="Input"},6815:function(e,a,s){"use strict";s.d(a,{_:function(){return o}});var r=s(7437),t=s(2265),i=s(6394),l=s(535),n=s(4508);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(i.f,{ref:a,className:(0,n.cn)(c(),s),...t})});o.displayName=i.f.displayName},5153:function(e,a,s){"use strict";s.d(a,{Am:function(){return m},pm:function(){return u}});var r=s(2265);let t=0,i=new Map,l=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},c=[],o={toasts:[]};function d(e){o=n(o,e),c.forEach(e=>{e(o)})}function m(e){let{...a}=e,s=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,a]=r.useState(o);return r.useEffect(()=>(c.push(a),()=>{let e=c.indexOf(a);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},1985:function(e,a,s){"use strict";s.d(a,{NC:function(){return o},_x:function(){return n},vS:function(){return l},yv:function(){return c}});var r=s(7293),t=s(8552);r.I8&&(0,t.Fb)(r.I8,t.a$).catch(e=>{console.error("Error configurando persistencia:",e)});let i=["admin@caprilandia.com","test@caprilandia.com"];async function l(e,a){if(!r.I8)return console.error("\uD83D\uDEAB Firebase Auth no est\xe1 disponible"),{success:!1,error:"Firebase Auth no est\xe1 disponible"};try{let s=(await (0,t.e5)(r.I8,e,a)).user;if(i.includes(e))return{success:!0,user:s};if(!(await s.getIdTokenResult()).claims.admin)throw await (0,t.w7)(r.I8),Error("No tienes permisos de administrador");return{success:!0,user:s}}catch(a){console.error("❌ Error en login:",a);let e="Error desconocido";if(a instanceof Error)switch(a.message){case"Firebase: Error (auth/user-not-found).":e="Usuario no encontrado";break;case"Firebase: Error (auth/wrong-password).":e="Contrase\xf1a incorrecta";break;case"Firebase: Error (auth/invalid-email).":e="Email inv\xe1lido";break;case"Firebase: Error (auth/network-request-failed).":e="Error de conexi\xf3n. Verifica tu internet.";break;default:e=a.message}return{success:!1,error:e}}}async function n(){if(!r.I8)return{success:!1,error:"Firebase Auth no est\xe1 disponible"};try{return await (0,t.w7)(r.I8),{success:!0}}catch(e){return console.error("❌ Error en logout:",e),{success:!1,error:e instanceof Error?e.message:"Error al cerrar sesi\xf3n"}}}function c(e){return r.I8?(0,t.Aj)(r.I8,a=>{e(a)}):(e(null),()=>{})}async function o(){if(!r.I8)return!1;try{let e=r.I8.currentUser;if(!e)return!1;if(i.includes(e.email||""))return!0;return!!(await e.getIdTokenResult()).claims.admin}catch(e){return console.error("❌ Error verificando admin:",e),!1}}},1020:function(e,a,s){"use strict";s.d(a,{m:function(){return n}});var r=s(7293),t=s(6485);let i=["image/jpeg","image/jpg","image/png","image/webp"],l=["video/mp4","video/webm","video/quicktime"];class n{static async checkStorageConnection(){if(!r.tO)return!1;try{return(0,t.iH)(r.tO,"test-connection"),!0}catch(e){return console.error("❌ Error de conexi\xf3n a Firebase Storage:",e),!1}}static validateFile(e){let a=[...i,...l];return a.includes(e.type)?e.size>52428800?{valid:!1,error:"Archivo muy grande: ".concat((e.size/1024/1024).toFixed(2),"MB. M\xe1ximo permitido: ").concat(50,"MB")}:{valid:!0}:{valid:!1,error:"Tipo de archivo no permitido: ".concat(e.type,". Tipos permitidos: ").concat(a.join(", "))}}static async uploadFile(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media",s=this.validateFile(e);if(!s.valid)throw Error(s.error);try{return await this.uploadFileViaAPI(e,a)}catch(e){throw console.error("❌ Error en API fallback:",e),Error("Error subiendo archivo: ".concat(e instanceof Error?e.message:"Error desconocido"))}}static async uploadFileViaAPI(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media",s=new FormData;s.append("file",e),s.append("folder",a);let r=await fetch("/api/upload",{method:"POST",body:s});if(!r.ok)throw Error("API upload failed: ".concat(r.statusText));let t=await r.json();if(!t.success)throw Error(t.error||"API upload failed");return{url:t.url,type:t.type,filename:t.filename,path:t.path}}static async deleteFile(e){if(!r.tO)throw Error("Firebase Storage no est\xe1 inicializado");let a=r.tO;try{let s=(0,t.iH)(a,e);await (0,t.oq)(s)}catch(e){throw console.error("❌ Error eliminando archivo:",e),Error("Error eliminando archivo: ".concat(e instanceof Error?e.message:"Error desconocido"))}}static async generateVideoThumbnail(e){return new Promise((a,s)=>{let r=document.createElement("video"),t=document.createElement("canvas"),i=t.getContext("2d");if(!i){s(Error("No se pudo crear contexto de canvas"));return}r.onloadedmetadata=()=>{t.width=r.videoWidth||640,t.height=r.videoHeight||360,r.currentTime=Math.min(1,.1*r.duration)},r.onseeked=()=>{i.drawImage(r,0,0,t.width,t.height),a(t.toDataURL("image/jpeg",.8)),URL.revokeObjectURL(r.src)},r.onerror=e=>{console.error("❌ Error generando thumbnail:",e),s(Error("Error generando miniatura del video"))},r.src=URL.createObjectURL(e)})}static async resizeImage(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080;return new Promise((r,t)=>{let i=new Image,l=document.createElement("canvas"),n=l.getContext("2d");if(!n){t(Error("No se pudo crear contexto de canvas"));return}i.onload=()=>{let{width:c,height:o}=i;c>a&&(o=o*a/c,c=a),o>s&&(c=c*s/o,o=s),l.width=c,l.height=o,n.drawImage(i,0,0,c,o),l.toBlob(e=>{e?r(e):t(Error("Error convirtiendo imagen"))},e.type,.9)},i.onerror=()=>{t(Error("Error cargando imagen"))},i.src=URL.createObjectURL(e)})}}},7293:function(e,a,s){"use strict";let r;s.d(a,{I8:function(){return c},tO:function(){return o}});var t=s(738),i=s(5978),l=s(8552),n=s(6485);r=0===(0,t.C6)().length?(0,t.ZF)({apiKey:"AIzaSyAJd6zyhkkqVjuQWb6thS05UeD8-rCaCZ0",authDomain:"carilandia-base.firebaseapp.com",projectId:"carilandia-base",storageBucket:"carilandia-base.firebasestorage.app",messagingSenderId:"841945640213",appId:"1:841945640213:web:35cec3e1e3c91085db0d1c",measurementId:"G-HXPX889G7H"}):(0,t.C6)()[0];let c=null,o=null;try{(0,i.ad)(r),c=(0,l.v0)(r),o=(0,n.cF)(r)}catch(e){console.error("❌ Error inicializando Firebase:",e),c=null,o=null}}},function(e){e.O(0,[609,15,138,589,100,731,469,7,440,956,421,577,399,85,38,378,433,747,365,783,212,170,971,744],function(){return e(e.s=5681)}),_N_E=e.O()}]);