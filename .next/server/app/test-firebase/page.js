(()=>{var e={};e.id=477,e.ids=[477],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},74269:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>d}),t(17935),t(27214),t(90996);var a=t(30170),i=t(45002),s=t(83876),o=t.n(s),n=t(66299),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(r,c);let d=["",{children:["test-firebase",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17935)),"P:\\caprilandia-web\\app\\test-firebase\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,27214)),"P:\\caprilandia-web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,90996,23)),"next/dist/client/components/not-found-error"]}],l=["P:\\caprilandia-web\\app\\test-firebase\\page.tsx"],u="/test-firebase/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/test-firebase/page",pathname:"/test-firebase",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},13595:(e,r,t)=>{Promise.resolve().then(t.bind(t,23031))},23031:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var a=t(97247),i=t(28964),s=t(25163),o=t(62035),n=t(58053),c=t(27757),d=t(2502),l=t(53871);function u(){let[e,r]=(0,i.useState)(""),[t,s]=(0,i.useState)(!1),o=async()=>{s(!0),r("Probando conexi\xf3n...");try{await l.m.checkStorageConnection()?r("✅ Firebase Storage conectado correctamente"):r("❌ No se pudo conectar a Firebase Storage")}catch(e){r(`❌ Error: ${e instanceof Error?e.message:"Error desconocido"}`)}finally{s(!1)}},u=async e=>{let t=e.target.files?.[0];if(t){s(!0),r("Subiendo archivo de prueba...");try{let e=await l.m.uploadFile(t,"test");r(`✅ Archivo subido: ${e.url}`)}catch(e){r(`❌ Error subiendo archivo: ${e instanceof Error?e.message:"Error desconocido"}`),console.error("Error detallado:",e)}finally{s(!1)}}};return(0,a.jsxs)(c.Zb,{className:"max-w-2xl mx-auto",children:[a.jsx(c.Ol,{children:a.jsx(c.ll,{children:"\uD83E\uDDEA Test Firebase Storage"})}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(n.z,{onClick:o,disabled:t,children:"Probar Conexi\xf3n"}),(0,a.jsxs)("div",{children:[a.jsx("input",{type:"file",onChange:u,accept:"image/*,video/*",disabled:t,style:{display:"none"},id:"file-test"}),a.jsx(n.z,{onClick:()=>document.getElementById("file-test")?.click(),disabled:t,variant:"outline",children:"Probar Subida de Archivo"})]})]}),e&&a.jsx(d.bZ,{children:a.jsx(d.X,{children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:e})})}),t&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Procesando..."})]})]})]})}function p(){let[e,r]=(0,i.useState)("Verificando..."),t=async()=>{if(!s.I8){r("❌ Firebase Auth no est\xe1 disponible");return}try{let e=await (0,o.e5)(s.I8,"test@caprilandia.com","Test123456!");r(`✅ Login exitoso: ${e.user.email}`)}catch(e){r(`❌ Error: ${e instanceof Error?e.message:"Error desconocido"}`)}};return(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test Firebase Auth"}),a.jsx("p",{className:"mb-4",children:e}),a.jsx("button",{onClick:t,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Test Login"})]}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Test Firebase Storage"}),a.jsx(u,{})]})]})}},2502:(e,r,t)=>{"use strict";t.d(r,{X:()=>d,bZ:()=>c});var a=t(97247),i=t(28964),s=t(87972),o=t(25008);let n=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=i.forwardRef(({className:e,variant:r,...t},i)=>a.jsx("div",{ref:i,role:"alert",className:(0,o.cn)(n({variant:r}),e),...t}));c.displayName="Alert",i.forwardRef(({className:e,...r},t)=>a.jsx("h5",{ref:t,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let d=i.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",e),...r}));d.displayName="AlertDescription"},53871:(e,r,t)=>{"use strict";t.d(r,{m:()=>n});var a=t(25163),i=t(78065);let s=["image/jpeg","image/jpg","image/png","image/webp"],o=["video/mp4","video/webm","video/quicktime"];class n{static async checkStorageConnection(){if(!a.tO)return!1;try{return(0,i.iH)(a.tO,"test-connection"),!0}catch(e){return console.error("❌ Error de conexi\xf3n a Firebase Storage:",e),!1}}static validateFile(e){let r=[...s,...o];return r.includes(e.type)?e.size>52428800?{valid:!1,error:`Archivo muy grande: ${(e.size/1024/1024).toFixed(2)}MB. M\xe1ximo permitido: 50MB`}:{valid:!0}:{valid:!1,error:`Tipo de archivo no permitido: ${e.type}. Tipos permitidos: ${r.join(", ")}`}}static async uploadFile(e,r="media"){let t=this.validateFile(e);if(!t.valid)throw Error(t.error);try{return await this.uploadFileViaAPI(e,r)}catch(e){throw console.error("❌ Error en API fallback:",e),Error(`Error subiendo archivo: ${e instanceof Error?e.message:"Error desconocido"}`)}}static async uploadFileViaAPI(e,r="media"){let t=new FormData;t.append("file",e),t.append("folder",r);let a=await fetch("/api/upload",{method:"POST",body:t});if(!a.ok)throw Error(`API upload failed: ${a.statusText}`);let i=await a.json();if(!i.success)throw Error(i.error||"API upload failed");return{url:i.url,type:i.type,filename:i.filename,path:i.path}}static async deleteFile(e){if(!a.tO)throw Error("Firebase Storage no est\xe1 inicializado");let r=a.tO;try{let t=(0,i.iH)(r,e);await (0,i.oq)(t)}catch(e){throw console.error("❌ Error eliminando archivo:",e),Error(`Error eliminando archivo: ${e instanceof Error?e.message:"Error desconocido"}`)}}static async generateVideoThumbnail(e){return new Promise((r,t)=>{let a=document.createElement("video"),i=document.createElement("canvas"),s=i.getContext("2d");if(!s){t(Error("No se pudo crear contexto de canvas"));return}a.onloadedmetadata=()=>{i.width=a.videoWidth||640,i.height=a.videoHeight||360,a.currentTime=Math.min(1,.1*a.duration)},a.onseeked=()=>{s.drawImage(a,0,0,i.width,i.height),r(i.toDataURL("image/jpeg",.8)),URL.revokeObjectURL(a.src)},a.onerror=e=>{console.error("❌ Error generando thumbnail:",e),t(Error("Error generando miniatura del video"))},a.src=URL.createObjectURL(e)})}static async resizeImage(e,r=1920,t=1080){return new Promise((a,i)=>{let s=new Image,o=document.createElement("canvas"),n=o.getContext("2d");if(!n){i(Error("No se pudo crear contexto de canvas"));return}s.onload=()=>{let{width:c,height:d}=s;c>r&&(d=d*r/c,c=r),d>t&&(c=c*t/d,d=t),o.width=c,o.height=d,n.drawImage(s,0,0,c,d),o.toBlob(e=>{e?a(e):i(Error("Error convirtiendo imagen"))},e.type,.9)},s.onerror=()=>{i(Error("Error cargando imagen"))},s.src=URL.createObjectURL(e)})}}},25163:(e,r,t)=>{"use strict";let a;t.d(r,{I8:()=>c,tO:()=>d});var i=t(68132),s=t(10203),o=t(62035),n=t(78065);a=0===(0,i.C6)().length?(0,i.ZF)({apiKey:"AIzaSyAJd6zyhkkqVjuQWb6thS05UeD8-rCaCZ0",authDomain:"carilandia-base.firebaseapp.com",projectId:"carilandia-base",storageBucket:"carilandia-base.firebasestorage.app",messagingSenderId:"841945640213",appId:"1:841945640213:web:35cec3e1e3c91085db0d1c",measurementId:"G-HXPX889G7H"}):(0,i.C6)()[0];let c=null,d=null;try{(0,s.ad)(a),c=(0,o.v0)(a),d=(0,n.cF)(a)}catch(e){console.error("❌ Error inicializando Firebase:",e),c=null,d=null}},17935:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(45347).createProxy)(String.raw`P:\caprilandia-web\app\test-firebase\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[379,741,355,188],()=>t(74269));module.exports=a})();